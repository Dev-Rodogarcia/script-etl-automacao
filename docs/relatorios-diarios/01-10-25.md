# 📊 Relatório de Avanços e Status Atual (01/10/2025)

## 🔎 Visão Geral

Já integrado com **REST, GraphQL e Data Export**, atua como um **ETL resiliente**, pendente apenas de ajustes de acesso.

---

## ✅ Melhorias Implementadas
- Pausa automática de **2s em rate limit (429)**.  
- **Carga incremental** com `last_run.properties`.  
- **Resiliência**: falhas em uma API não interrompem as demais.
- **🆕 Sistema de Testes Isolados por API**: Permite testar APIs específicas individualmente.

## 🎯 Nova Funcionalidade: Testes Isolados

**Comandos implementados:**
- `--teste-rest`: Testa apenas APIs REST (Faturas + Ocorrências)
- `--teste-graphql`: Testa apenas API GraphQL (Coletas + Fretes)  
- `--teste-data-export`: Testa apenas API Data Export (Manifestos + Localização)
- `--ajuda`: Exibe todos os comandos disponíveis

**Benefícios:**
- **Desenvolvimento mais eficiente**: Testa APIs específicas sem executar todas
- **Economia de quota**: Reduz consumo durante desenvolvimento
- **Debug facilitado**: Isola problemas em APIs específicas
- **Tempos otimizados**: Data Export (~4s), GraphQL (~11s), REST (~28s)

---

## 📂 Status por Entidade
- **REST – Faturas**: ✅ Concluído e funcional.  
- **GraphQL – Fretes**: ✅ Código estável; precisa ajuste nos filtros.  

---

## 🚧 Pendências Principais
1. **REST – Ocorrências**: Erro 500 em buscas longas.  
   → Ação: reportar instabilidade ao suporte ESL.

2. **GraphQL – Fretes**: Query retorna 0 resultados.  
   → Ação: revisar `FreightInput` com Postman.

3. **GraphQL – Coletas (PENDÊNCIA CRÍTICA)**:  
   Token sem permissão → erro `Field 'Coletas' doesn't exist`.  
   → Ação: solicitar liberação de permissão ao administrador ESL, e verificar no ESL qual nome de fato está sendo utilizado.

---

## 📩 Solicitação ao Suporte ESL
**Assunto:** Liberação Urgente – Query `Coletas`  

**Mensagem:**  
"Nosso token da API GraphQL funciona (ex.: `cargoClassification`), porém a query `Coletas` retorna *Field 'Coletas' doesn't exist*. Solicitamos a liberação de permissão para esta query em nosso token para conclusão do projeto."
