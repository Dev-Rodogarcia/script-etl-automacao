# Relatório Técnico de Acesso e Permissões da API REST do ESL Cloud

**Data:** 23 de Setembro de 2025
**Projeto:** Automação da Extração de Dados para BI
**Assunto:** Solicitação de Alargamento de Permissões para o Token da API REST

## 1. Contexto

Este documento detalha os resultados dos testes de acesso realizados nos *endpoints* da **API REST** do sistema ESL Cloud. O objetivo é validar as credenciais para o nosso novo script de automação, que precisa de extrair dados de diversas entidades do sistema (Faturas, Ocorrências, Agentes, etc.).

Utilizámos a coleção do Postman, cuja estrutura está anexa, e o **Token do Usuário do Sistema** (`***TOKEN_CENSURADO_POR_SEGURANCA***`) fornecido para os testes.

## 2. Resumo Executivo do Problema

Os testes confirmaram que o token fornecido é válido, mas o seu escopo de permissões está **limitado apenas ao *endpoint* de Faturas**. Todas as tentativas de aceder a outros *endpoints* da API REST resultaram num erro **`401 Unauthorized`**.

Para que o projeto de automação possa prosseguir, é essencial que as permissões de leitura (GET/POST) deste token sejam alargadas para abranger todas as entidades listadas abaixo.

## 3. Análise Detalhada dos Testes

Com base na estrutura de APIs disponível no Postman, realizámos testes em todas as categorias relevantes da API REST.

### ✅ Cenário de Sucesso (Ponto de Referência)

-   **Categoria da API:** `FINANCEIRO`
-   **Endpoint Específico:** `/api/accounting/credit/billings` (Faturas a Receber)
-   **Resultado:** **`200 OK`**
-   **Conclusão:** Este teste bem-sucedido prova que a `api.baseurl`, o formato da requisição e o token são fundamentalmente corretos. O problema reside no escopo de permissão do token.

### ❌ Cenários de Falha (`401 Unauthorized`)

O mesmo token foi utilizado para testar os *endpoints* de todas as outras categorias da API REST, e **todos** resultaram em erro `401 Unauthorized`. As categorias que falharam incluem:

-   `GLOSSÁRIO`
-   `AGENTE`
-   `CONSOLIDAÇÃO`
-   `CUBADORA`
-   `DATA EXPORT`
-   `FRETE`
-   `MARGEM DE FRETE`
-   `MINUTA DESPACHO`
-   `NOTA FISCAL`
-   `OCORRÊNCIA`
-   `OCORRÊNCIA CLIENTE`
-   `RECEBIMENTO DECLARAÇÃO / NF-E / FRETE`
-   `ROTEIRIZADOR`
-   `USUÁRIO`
-   `VEÍCULOS`


A falha em múltiplos *endpoints*, como `/api/occurrences`, confirma que o acesso é restrito.

## 4. Ação Solicitada (Pedido à Equipe da Plataforma)

Para desbloquear o desenvolvimento do projeto de integração de BI, solicitamos formalmente que as permissões do seguinte token sejam revistas e alargadas:

-   **Token a ser modificado:** Token do Usuário do Sistema
    -   `***TOKEN_CENSURADO_POR_SEGURANCA***`
    -   `***TOKEN_CENSURADO_POR_SEGURANCA***`

-   **Permissões Necessárias:**
    -   Conceder permissão de **leitura (GET/POST)** para estes tokens em **todos os endpoints de consulta** listados na coleção da API REST conforme a estrutura da imagem em anexo. O acesso é crucial, no mínimo, para as entidades definidas no escopo do projeto (Ocorrências, Manifestos, Localização, etc.).