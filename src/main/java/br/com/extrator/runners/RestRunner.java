package br.com.extrator.runners;

import java.time.LocalDate;

import br.com.extrator.servicos.ExtracaoServico;

/**
 * Runner independente para a API REST (Faturas e OcorrÃªncias).
 * Agora utiliza o ExtracaoServico para garantir logging adequado
 * de todas as extraÃ§Ãµes na tabela log_extracoes.
 */
public final class RestRunner {

    private RestRunner() {}

    public static void executar(final LocalDate dataInicio) throws Exception {
        System.out.println("ðŸ”„ Executando runner REST...");

        // Valida conexÃ£o com banco
        br.com.extrator.util.CarregadorConfig.validarConexaoBancoDados();

        // Inicializa o serviÃ§o de extraÃ§Ã£o
        final ExtracaoServico extracaoServico = new ExtracaoServico();

        // Executa todas as extraÃ§Ãµes usando o serviÃ§o
        System.out.println("\nðŸ“‹ Executando extraÃ§Ã£o completa com logging...");
        extracaoServico.executarExtracaoCompleta(dataInicio);
        
        System.out.println("âœ… ExtraÃ§Ã£o REST finalizada com sucesso!");
    }
}